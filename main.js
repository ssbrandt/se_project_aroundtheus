!function(){"use strict";class t{constructor(t,e,s){this._cardSelector=e,this._cardTitle=t.title,this._cardImage=t.image,this._handleCardClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_handleLike=()=>{this._likeButton.classList.toggle("card__like-button_active")};_handleDelete=()=>{this._element.remove(),this._element=null};_setEventListeners(){this._element.querySelector(".card__image").addEventListener("click",this._handleCardClick),this._likeButton.addEventListener("click",this._handleLike),this._deleteButton.addEventListener("click",this._handleDelete)}generateCard(){return this._element=this._getTemplate(),this._element.querySelector(".card__title").textContent=this._cardTitle,this._cardPicture=this._element.querySelector(".card__image"),this._cardPicture.src=this._cardImage,this._cardPicture.alt=`Photo of ${this._cardTitle}`,this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._setEventListeners(),this._element}}class e{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=e}_showInputError(t){const e=this._formElement.querySelector(`.${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._formElement.querySelector(`.${t.id}-error`);t.classList.remove(this._errorClass),e.textContent="",e.classList.remove(this._errorClass)}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_activateButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this.deactivateSubmitButton():this._activateButton()}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}enableValidation(){this._setEventListeners(),this._toggleButtonState()}deactivateSubmitButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}}class s{constructor(t){this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__button-close")}_handleEscClose=t=>{"Escape"===t.key&&this.close()};_handleCloseOnClick=t=>{t.target.classList.contains("modal_opened")&&!t.target.closest(".modal__container")&&this.close()};_handleCloseButton=()=>{this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",this._handleCloseOnClick),this._closeButton.addEventListener("click",this._handleCloseButton)}removeEventListeners(){this._popupElement.removeEventListener("mousedown",this._handleCloseOnClick),this._closeButton.removeEventListener("click",this._handleCloseButton)}open(){this._popupElement.classList.add("modal_opened"),this.setEventListeners(),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),this.removeEventListeners(),document.removeEventListener("keydown",this._handleEscClose)}}class i extends s{constructor(t){let{popupSelector:e,handleFormSubmit:s}=t;super(e),this._handleFormSubmit=s,this._popupElement=document.querySelector(e),this._popupForm=this._popupElement.querySelector(".modal__form")}_getInputValues=()=>{const t=new FormData(this._popupForm);return Object.fromEntries(t)};handleFormSubmit=t=>{t.preventDefault();const e=this._getInputValues();this._handleFormSubmit(e)};setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this.handleFormSubmit)}close(){this._popupForm.reset(),this._popupForm.removeEventListener("submit",this.handleFormSubmit),super.close()}}const o={};var r;r={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input-error",errorClass:"form__input-error-message_active"},Array.from(document.querySelectorAll(r.formSelector)).forEach((t=>{const s=new e(r,t),i=t.getAttribute("name");o[i]=s,s.enableValidation()}));const n=new class extends s{constructor(t){super(t),this._popupImage=this._popupElement.querySelector(".modal__image"),this._popupTitle=this._popupElement.querySelector(".modal__title_image")}open(t){let{image:e,title:s}=t;this._popupImage.src=e,this._popupImage.alt=`Photo of ${s}`,this._popupTitle.textContent=s,super.open()}}(".view-image-popup"),l=e=>{const s=new t(e,".card-template",(()=>{n.open({image:e.image,title:e.title})}));a.addItem(s.generateCard())},a=new class{constructor(t,e){let{items:s,renderer:i}=t;this._items=s,this._renderer=i,this._container=document.querySelector(e)}renderItems(){this._items.forEach(this._renderer)}addItem(t){this._container.prepend(t)}}({items:[{title:"Washington DC",image:"https://images.unsplash.com/photo-1617581629397-a72507c3de9e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1744&q=80"},{title:"Charlottesville",image:"https://images.unsplash.com/photo-1625685124246-529a036f3142?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=774&q=80"},{title:"Rhode Island",image:"https://images.unsplash.com/photo-1579379498402-48d6751d1ae9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=739&q=80"},{title:"Blue Ridge Mountains",image:"https://images.unsplash.com/photo-1603670849273-deb4670aa548?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=773&q=80"},{title:"Cape Cod",image:"https://images.unsplash.com/photo-1516400691782-ad921bc57267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=376&q=80"},{title:"Harrisonburg VA",image:"https://images.unsplash.com/photo-1657567384402-b9918d5fd7b5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=735&q=80"}],renderer:l},".location__cards");a.renderItems();const u=document.forms["edit-profile-form"],c=u.querySelector("#name"),h=u.querySelector("#subtitle"),m=new class{constructor(t){let{userNameSelector:e,userInfoSelector:s}=t;this._userName=document.querySelector(e),this._userInfo=document.querySelector(s)}getUserInfo(){return{name:this._userName.textContent,info:this._userInfo.textContent}}setUserInfo(t){let{name:e,info:s}=t;this._userName.textContent=e,this._userInfo.textContent=s}}({userNameSelector:".profile__name",userInfoSelector:".profile__subtitle"}),d=new i({popupSelector:".profile-popup",handleFormSubmit:()=>{m.setUserInfo({name:c.value,info:h.value}),d.close()}});document.querySelector(".profile__edit-button").addEventListener("click",(()=>{const t=m.getUserInfo();c.value=t.name,h.value=t.info,o["edit-profile-form"].resetValidation(),d.open()}));const _=new i({popupSelector:".add-card-popup",handleFormSubmit:t=>{l(t),_.close()}});document.querySelector(".profile__add-button").addEventListener("click",(()=>{_.open(),o["add-location-form"].resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QmpDLGtCQUNwQ3FFLEVBQWFwRCxNQUFNLElBS3JCLE1BQU11RCxFQUFlLElBQUl0RCxFQUFjLENBQ3JDaEIsY0FBZSxrQkFDZmtCLGlCQUFtQlcsSUFDakJVLEVBQVdWLEdBQ1h5QyxFQUFhaEUsT0FBTyxJQUlFaEUsU0FBU0MsY0FBYyx3QkFFL0JXLGlCQUFpQixTQUFTLEtBQzFDb0gsRUFBYXZELE9BQ2JnQixFQUFlLHFCQUFxQmpDLGlCQUFpQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gZGF0YS50aXRsZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSBkYXRhLmltYWdlO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBfY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBfY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfaGFuZGxlTGlrZSA9ICgpID0+IHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH07XG5cbiAgX2hhbmRsZURlbGV0ZSA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9O1xuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcblxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2UpO1xuXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGUpO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIC8vYWRkIGV2ZW50IGxpc3RlbmVyc1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZFRpdGxlO1xuICAgIHRoaXMuX2NhcmRQaWN0dXJlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRQaWN0dXJlLnNyYyA9IHRoaXMuX2NhcmRJbWFnZTtcbiAgICB0aGlzLl9jYXJkUGljdHVyZS5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9jYXJkVGl0bGV9YDtcblxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICBfYWN0aXZhdGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuZGVhY3RpdmF0ZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hY3RpdmF0ZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgZGVhY3RpdmF0ZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19idXR0b24tY2xvc2VcIlxuICAgICk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgX2hhbmRsZUNsb3NlT25DbGljayA9IChldnQpID0+IHtcbiAgICBpZiAoXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSAmJlxuICAgICAgIWV2dC50YXJnZXQuY2xvc2VzdChcIi5tb2RhbF9fY29udGFpbmVyXCIpXG4gICAgKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYW5kbGVDbG9zZUJ1dHRvbiA9ICgpID0+IHtcbiAgICB0aGlzLmNsb3NlKCk7XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQ2xvc2VPbkNsaWNrKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xvc2VCdXR0b24pO1xuICB9XG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICBcIm1vdXNlZG93blwiLFxuICAgICAgdGhpcy5faGFuZGxlQ2xvc2VPbkNsaWNrXG4gICAgKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xvc2VCdXR0b24pO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcyA9ICgpID0+IHtcbiAgICBjb25zdCBmb3JtTGlzdCA9IG5ldyBGb3JtRGF0YSh0aGlzLl9wb3B1cEZvcm0pO1xuICAgIGNvbnN0IGZvcm1PYmplY3QgPSBPYmplY3QuZnJvbUVudHJpZXMoZm9ybUxpc3QpO1xuICAgIHJldHVybiBmb3JtT2JqZWN0O1xuICB9O1xuXG4gIGhhbmRsZUZvcm1TdWJtaXQgPSAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChmb3JtRGF0YSk7XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLmhhbmRsZUZvcm1TdWJtaXQpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5oYW5kbGVGb3JtU3VibWl0KTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgdGl0bGU6IFwiV2FzaGluZ3RvbiBEQ1wiLFxuICAgIGltYWdlOlxuICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYxNzU4MTYyOTM5Ny1hNzI1MDdjM2RlOWU/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTc0NCZxPTgwXCIsXG4gIH0sXG5cbiAge1xuICAgIHRpdGxlOiBcIkNoYXJsb3R0ZXN2aWxsZVwiLFxuICAgIGltYWdlOlxuICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYyNTY4NTEyNDI0Ni01MjlhMDM2ZjMxNDI/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Nzc0JnE9ODBcIixcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIlJob2RlIElzbGFuZFwiLFxuICAgIGltYWdlOlxuICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU3OTM3OTQ5ODQwMi00OGQ2NzUxZDFhZTk/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NzM5JnE9ODBcIixcbiAgfSxcblxuICB7XG4gICAgdGl0bGU6IFwiQmx1ZSBSaWRnZSBNb3VudGFpbnNcIixcbiAgICBpbWFnZTpcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MDM2NzA4NDkyNzMtZGViNDY3MGFhNTQ4P2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTc3MyZxPTgwXCIsXG4gIH0sXG5cbiAge1xuICAgIHRpdGxlOiBcIkNhcGUgQ29kXCIsXG4gICAgaW1hZ2U6XG4gICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTE2NDAwNjkxNzgyLWFkOTIxYmM1NzI2Nz9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0zNzYmcT04MFwiLFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiSGFycmlzb25idXJnIFZBXCIsXG4gICAgaW1hZ2U6XG4gICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjU3NTY3Mzg0NDAyLWI5OTE4ZDVmZDdiNT9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03MzUmcT04MFwiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXRcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zdWJtaXRfaW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3ItbWVzc2FnZV9hY3RpdmVcIixcbn07XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG4vL2Zvcm0gdmFsaWRhdGlvbnNcblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcblxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcblxuLy9DYXJkIGZ1bmN0aW9uYWxpdHlcblxuY29uc3Qgdmlld0ltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIudmlldy1pbWFnZS1wb3B1cFwiKTtcblxuY29uc3QgcmVuZGVyQ2FyZCA9IChpdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBcIi5jYXJkLXRlbXBsYXRlXCIsICgpID0+IHtcbiAgICB2aWV3SW1hZ2VQb3B1cC5vcGVuKHsgaW1hZ2U6IGl0ZW0uaW1hZ2UsIHRpdGxlOiBpdGVtLnRpdGxlIH0pO1xuICB9KTtcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcbn07XG5cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxuICB9LFxuICBcIi5sb2NhdGlvbl9fY2FyZHNcIlxuKTtcblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLy9Qcm9maWxlIGZ1bmN0aW9uYWxpdHlcblxuY29uc3QgcHJvZmlsZUZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGUtZm9ybVwiXTtcbmNvbnN0IGVkaXRQcm9maWxlTmFtZSA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIik7XG5jb25zdCBlZGl0UHJvZmlsZVN1YnRpdGxlID0gcHJvZmlsZUZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3VidGl0bGVcIik7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxuICB1c2VySW5mb1NlbGVjdG9yOiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxufSk7XG5cbi8vbmV3XG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiLnByb2ZpbGUtcG9wdXBcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgIG5hbWU6IGVkaXRQcm9maWxlTmFtZS52YWx1ZSxcbiAgICAgIGluZm86IGVkaXRQcm9maWxlU3VidGl0bGUudmFsdWUsXG4gICAgfSk7XG4gICAgcHJvZmlsZVBvcHVwLmNsb3NlKCk7XG4gIH0sXG59KTtcblxuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGVkaXRQcm9maWxlTmFtZS52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XG4gIGVkaXRQcm9maWxlU3VidGl0bGUudmFsdWUgPSB1c2VyRGF0YS5pbmZvO1xuICBmb3JtVmFsaWRhdG9yc1tcImVkaXQtcHJvZmlsZS1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwcm9maWxlUG9wdXAub3BlbigpO1xufSk7XG5cbi8vYWRkIG5ldyBjYXJkXG5cbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIuYWRkLWNhcmQtcG9wdXBcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XG4gICAgcmVuZGVyQ2FyZChmb3JtRGF0YSk7XG4gICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG4gIH0sXG59KTtcblxuY29uc3QgYWRkTG9jYXRpb25CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmFkZExvY2F0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG4gIGZvcm1WYWxpZGF0b3JzW1wiYWRkLWxvY2F0aW9uLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fcG9wdXBUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190aXRsZV9pbWFnZVwiKTtcbiAgfVxuXG4gIG9wZW4oeyBpbWFnZSwgdGl0bGUgfSkge1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gaW1hZ2U7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBgUGhvdG8gb2YgJHt0aXRsZX1gO1xuICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcblxuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcik7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJJbmZvU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VySW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckluZm9TZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXG4gICAgICBpbmZvOiB0aGlzLl91c2VySW5mby50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBpbmZvIH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fdXNlckluZm8udGV4dENvbnRlbnQgPSBpbmZvO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsInRoaXMiLCJfY2FyZFNlbGVjdG9yIiwiX2NhcmRUaXRsZSIsInRpdGxlIiwiX2NhcmRJbWFnZSIsImltYWdlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfaGFuZGxlTGlrZSIsIl9saWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2hhbmRsZURlbGV0ZSIsIl9lbGVtZW50IiwicmVtb3ZlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVCdXR0b24iLCJnZW5lcmF0ZUNhcmQiLCJ0ZXh0Q29udGVudCIsIl9jYXJkUGljdHVyZSIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRMaXN0Iiwic29tZSIsIl9hY3RpdmF0ZUJ1dHRvbiIsIl9idXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJkZWFjdGl2YXRlU3VibWl0QnV0dG9uIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbmFibGVWYWxpZGF0aW9uIiwicmVzZXRWYWxpZGF0aW9uIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc2NDbG9zZSIsImV2dCIsImtleSIsImNsb3NlIiwiX2hhbmRsZUNsb3NlT25DbGljayIsInRhcmdldCIsImNvbnRhaW5zIiwiY2xvc2VzdCIsIl9oYW5kbGVDbG9zZUJ1dHRvbiIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib3BlbiIsIlBvcHVwV2l0aEZvcm0iLCJfcmVmIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwiX2dldElucHV0VmFsdWVzIiwiZm9ybUxpc3QiLCJGb3JtRGF0YSIsIk9iamVjdCIsImZyb21FbnRyaWVzIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZm9ybURhdGEiLCJyZXNldCIsImZvcm1WYWxpZGF0b3JzIiwiZm9ybVNlbGVjdG9yIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJ2aWV3SW1hZ2VQb3B1cCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGl0bGUiLCJyZW5kZXJDYXJkIiwiaXRlbSIsImNhcmQiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJlbGVtZW50IiwicHJlcGVuZCIsInByb2ZpbGVGb3JtRWxlbWVudCIsImZvcm1zIiwiZWRpdFByb2ZpbGVOYW1lIiwiZWRpdFByb2ZpbGVTdWJ0aXRsZSIsInVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJJbmZvU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckluZm8iLCJnZXRVc2VySW5mbyIsIm5hbWUiLCJpbmZvIiwic2V0VXNlckluZm8iLCJfcmVmMiIsInByb2ZpbGVQb3B1cCIsInZhbHVlIiwidXNlckRhdGEiLCJhZGRDYXJkUG9wdXAiXSwic291cmNlUm9vdCI6IiJ9